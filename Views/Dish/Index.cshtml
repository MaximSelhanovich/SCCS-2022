@model IEnumerable<WEB_053502_Selhanovich.Entities.Dish>

@{
    ViewData["Title"] = "Меню";
    var categories = ViewData["DishCategories"] as IEnumerable<DishCategory>;
    int currentCategory = (int)ViewData["CurrentCategory"];
    var text = currentCategory != 0
    ? categories
    .FirstOrDefault(category => category.Id == currentCategory)?
    .Name
    : "Все категории";
}

<p>
    <a asp-action="Create">Create New</a>
</p>
<div class="container" id="list">
    <div class="col-2">
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                @text
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                <a asp-controller="Dish" asp-action="Index" class="dropdown-item" asp-route-category="0">Все категории</a>
                @foreach (var item in categories)
                {
                    <a asp-controller="Dish" asp-action="Index" class="dropdown-item" asp-route-category="@item.Id">@item.Name</a>
                }
            </ul>
        </div>
    </div>
    <partial name="_ListPartial" model="@Model" />
</div>

@section Scripts{
    <script>
        $(document).ready(function () {
                    console.log("On click")
            // подписать кнопки пейджера на событие click
            $(".pager").click(function (e) {
                log.console("in onclick")
                debugger;
                e.preventDefault();
                // получить адрес
                var uri = this.attributes["href"].value;
                // отправить асинхронный запрос и поместить ответ
                // в контейнер с id="list"
                $("#list").load(uri);
                // снять выделение с кнопки
                $(".active").removeClass("active disabled");
                // выделить текущую кнопку
                $(this).parent().addClass("active");
                // изменить адрес в адресной строке браузера
                history.pushState(null, null, uri);
            });
        });
    </script>
    <script>
        $(".pager")
            .click(function () {
                console.log("wtrrbrrncuynr")
                $("#list").load("_ListPartialggg.cshtml");
            });
    </script>
}